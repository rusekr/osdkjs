## Part 1: Preparing html document

Lets assume that you already got yours `appID` by providing application's name and link on [developers portal](http://portal.osdp.ru), [downloaded](http://download.osdp.ru) or [built](http://build.osdp.ru) oSDK library and created link to it inside the `head` tag of your application's html page like that:

```
&#60;script type="text/javascript" src="libraries/opensdp.osdk.js"&#62;&#60;/script&#62;
```

Now we need some html elements to control our application.

Let's create "connect" button, "disconnect" button, "text area" for output of our messages and all stuff we'll be doing, "user id" input box for user to whom we will be texting, "message" text box for message we'll be sending and finally "send text message" button.

Insides of our `body` tag in html file after that will be look like:

```
&#60;button id="connect" &#62;Connect&#60;/button&#62;
&#60;button id="disconnect" &#62;Disconnect&#60;/button&#62;
&#60;textarea id="status" &#62;&#60;/textarea&#62;
&#60;input id="messageuser" type="text" placeholder="Enter user for whom to send a message" /&#62;
&#60;input id="messagetext" type="text" placeholder="Enter message to send" /&#62;
&#60;button id="messagesend" &#62;Send message&#60;/button&#62;
```

## Part 2: Helper variables and functions

Let's create second tag `&#60;script type="text/javascript"&#62;&#60;/script&#62;` inside `head` tag of our page and copy into it following lines:

```
document.addEventListener('DOMContentLoaded', function () {

// All your next javascript code goes here

});
```

This construction delays our code execution until html document structure is fully loaded. Without it we can not find html element (like button or textarea) with javascript because that element is simply not managed to load at time of general javascript execution begins.


Now let's bind html elements created in previous part to javascript objects to be able to control them. Within previous block of code write:

```
var connectbutton = document.querySelector('#connect');
var disconnectbutton = document.querySelector('#disconnect');
var informationarea = document.querySelector('#status');
var sendmessagebutton = document.querySelector('#messagesend');
var sendmessagetext = document.querySelector('#messagetext');
var sendmessageuser = document.querySelector('#messageuser');
```

Now we'll write some helper functions.

`addText` method of `informationarea` makes easier for us to add text to our information displaying element and timestamp it:

```
informationarea.addText = function (text) {
  informationarea.innerHTML = (new Date()).toLocaleTimeString() + ': ' + text + '\n' + informationarea.innerHTML;
};
```

`connectbutton`, `disconnectbutton` and `sendmessagebutton` buttons getting `on` method for easier adding mouse `click` event handlers:

```
var buttons = document.querySelectorAll('button')
for(var i = 0; i < buttons.length; i++) {
  buttons[i].on = function (eventname, eventhandler) {
    this.addEventListener(eventname, eventhandler, false);
  };
}
```

## Part 3: Adding listeners for some oSDK events ##

Next we'll need mechanism to react to some events, generated by oSDK. Let's write code to listen to `connecting`, `connected`, `disconnecting`, `disconnected` and `connectionFailed` events. It will be look like this:

```
oSDK.on(['connecting', 'connected', 'disconnecting', 'disconnected', 'connectionFailed'], function (event) {
  // Here we displaying information regarding event in our information area.
  informationarea.addText('Application got oSDK status: ' + event.type);

  // Connected event returns connected user parameters and we now getting user ID from it and displaying within our information area.
  if(event.type == 'connected') {
    informationarea.addText('Connected as user: ' + event.user.id);
  }
});
```

For displaying of incoming text message from another user we'll need to listen for `incomingMessage` event:

```
oSDK.on('incomingMessage', function (messageObject) {
  // Adding to information area `messageObject` stuff useful for us.
  informationarea.addText('Received message "' + messageObject.message + '" from ' + messageObject.from);
});
```

## Part 4: Binding invokation of oSDK methods to clicks on our html elements ##

Clicking on connect button runs `oSDK.connect` method. Now oSDK will emit event `connecting` and will be trying to connect to openSDP network and in case of successfull connection will emit `connected` event which we got and used in previous part. If connection was unsuccessfull event `connectionFailed` will be emitted with information regarding problem.

```
connectbutton.on('click', function () {
  oSDK.connect();
});
```

Clicking on disconnect button triggers `oSDK.disconnect` methods. After that oSDK emits event `disconnecting` and will be trying to disconnect gracefully from openSDP network. When disconnection process will be finished you'll get `disconnected` event.

```
disconnectbutton.on('click', function () {
  oSDK.disconnect();
});
```

To send message to another user we need to get ID of that user from `sendmessageuser` element by `sendmessageuser.value` value and text of message from `sendmessagetext` element by `sendmessagetext.value` value. Next we use `oSDK.sendMessage` method to actually send message plus we logging that event in our information area element by `informationarea.addText` method.

```
sendmessagebutton.on('click', function () {
  oSDK.sendMessage(sendmessageuser.value, sendmessagetext.value);
  informationarea.addText('Sent message "' + sendmessagetext.value + '" to ' + sendmessageuser.value);
});
```

That's all for pre-initialization stuff.

## Part 5: Initializing oSDK with appID ##

For than you simply write:

```
oSDK({
  appID: '&#60;your appID as string&#62;'
});
```

Now you can try to use your application. And you can download complete example of that page from [here](examples/tutorial1.zip).
